{"version":3,"sources":["file:///Users/super_javan/cocoscreator/littleBeastFight3.6/assets/Launch/Lauch.ts"],"names":["Asset","Component","director","Label","macro","ProgressBar","sp","_decorator","reslist","ResMgr","ResType","ccclass","property","Launch","Skeleton","udpateTips","start","ENABLE_MULTI_TOUCH","progressBar","progress","lblTxt","string","startLoad","list","getInstance","preloadBundleOnly","map","Map","ResType_Prefab","ResType_Material","ResType_AudioClip","ResType_SpriteAtlas","ResType_SpriteFrame","preLoad","updateProgress","bind","onResLoadComplete","progressVal","Math","round","loadScene","err","scene","console","log"],"mappings":"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","sourcesContent":["import { Asset, Component, director, Label, macro, ProgressBar, sp, _decorator } from \"cc\";\nimport { reslist } from \"../Lobby/reslist\";\nimport { ResMgr, ResType } from \"../Script/Base/ResMgr\";\n\n\n/*\n * @Description: 启动界面\n * @Author: Super_Javan\n * @Date: 2022-11-29 12:05:17\n * @LastEditTime: 2022-11-29 15:32:30\n * @LastEditors: Super_Javan\n */\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('Launch')\nexport class Launch extends Component {\n    //加载进度条\n    @property(ProgressBar)\n    public progressBar: ProgressBar | null = null;\n\n    //加载的资源描述\n    @property(Label)\n    public lblTxt: Label | null = null;\n\n    @property(sp.Skeleton)\n    public spinAni: sp.Skeleton = null;\n    //热更新对应的节点引用\n\n    @property(Asset)\n    manifestUrl: Asset | null = null;\n\n    //byte的进度\n    @property(ProgressBar)\n    byteProgress: ProgressBar = null!;\n\n    @property(Label)\n    info: Label = null;\n\n\n    //更新提示的弹框内容\n    private udpateTips: Node = null;\n    start() {\n        //禁止多点触摸\n        macro.ENABLE_MULTI_TOUCH = false;\n        this.progressBar!.progress = 0;\n        this.lblTxt!.string = `加载中...0/100`;\n\n        this.startLoad();\n    }\n\n    private async startLoad() {\n        let list = reslist;\n        await ResMgr.getInstance().preloadBundleOnly('Lobby');\n\n        let map: Map<ResType, boolean> = new Map<ResType, boolean>(\n            [\n                [ResType.ResType_Prefab, true],\n                [ResType.ResType_Material, true],\n                [ResType.ResType_AudioClip, true],\n                [ResType.ResType_SpriteAtlas, true],\n                [ResType.ResType_SpriteFrame, true],\n            ]\n        );\n        return await ResMgr.getInstance().preLoad(list, this.updateProgress.bind(this), this.onResLoadComplete.bind(this), map);\n    }\n\n    public updateProgress(progress: number) {\n        this.progressBar!.progress = progress;\n        let progressVal = Math.round(progress * 100);\n        if (this.lblTxt != null) {\n            this.lblTxt.string = `加载中...${progressVal}/100`;\n        }\n    }\n\n    //加载完成回调\n    public onResLoadComplete() {\n        director.loadScene(\"Main\", (err, scene) => {\n            if (err != null) {\n                console.log(err);\n            }\n        });\n    }\n}"]}