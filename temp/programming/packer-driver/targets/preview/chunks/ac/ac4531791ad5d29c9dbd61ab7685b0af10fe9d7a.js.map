{"version":3,"sources":["file:///Users/super_javan/cocoscreator/littleBeastFight3.6/assets/Battle/Script/UIBattleLoading.ts"],"names":["_decorator","Node","Label","ProgressBar","EventMgr","FBGameEventName","UIWindow","ccclass","property","UIBattleLooading","onShow","Instance","addEventListen","GAME_LOAD_COMPLETE","onLoadCompeted","GAME_LOAD_PROGRESS","onLoadProgress","onHide","unEventListen","val","lblProTxt","getComponent","string","Math","round","progress","calDuDuChePos","len","x","duduChe","setPosition","closeSelf"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;;AAC3BC,MAAAA,Q;;AACEC,MAAAA,e,iBAAAA,e;;AACAC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OAGH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;kCAGjBS,gB,WADZF,OAAO,CAAC,kBAAD,C,UAEHC,QAAQ,CAACP,IAAD,C,UAERO,QAAQ,CAACP,IAAD,C,UAIRO,QAAQ,CAACP,IAAD,C,2BARb,MACaQ,gBADb;AAAA;AAAA,gCAC+C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAU3CC,QAAAA,MAAM,GAAiB;AACnB;AAAA;AAAA,oCAASC,QAAT,CAAkBC,cAAlB,CAAiC;AAAA;AAAA,kDAAgBC,kBAAjD,EAAqE,KAAKC,cAA1E,EAA0F,IAA1F;AACA;AAAA;AAAA,oCAASH,QAAT,CAAkBC,cAAlB,CAAiC;AAAA;AAAA,kDAAgBG,kBAAjD,EAAqE,KAAKC,cAA1E,EAA0F,IAA1F;AACH;;AAEDC,QAAAA,MAAM,GAAG;AACL;AAAA;AAAA,oCAASN,QAAT,CAAkBO,aAAlB,CAAgC;AAAA;AAAA,kDAAgBL,kBAAhD,EAAoE,KAAKC,cAAzE;AACA;AAAA;AAAA,oCAASH,QAAT,CAAkBO,aAAlB,CAAgC;AAAA;AAAA,kDAAgBH,kBAAhD,EAAoE,KAAKC,cAAzE;AACH;;AAEDA,QAAAA,cAAc,CAACG,GAAD,EAAc;AACxB,eAAKC,SAAL,CAAgBC,YAAhB,CAA6BnB,KAA7B,EAAqCoB,MAArC,GAAiDC,IAAI,CAACC,KAAL,CAAWL,GAAG,GAAG,GAAjB,CAAjD;AACA,eAAKM,QAAL,CAAeJ,YAAf,CAA4BlB,WAA5B,EAA0CsB,QAA1C,GAAqDN,GAArD,CAFwB,CAIxB;AACH;;AAEDO,QAAAA,aAAa,GAAG;AACZ,cAAID,QAAQ,GAAG,KAAKA,QAAL,CAAeJ,YAAf,CAA4BlB,WAA5B,EAA0CsB,QAAzD;AACA,cAAIE,GAAG,GAAG,GAAV;AACA,cAAIC,CAAC,GAAGD,GAAG,GAAGF,QAAN,GAAiBE,GAAG,GAAG,CAA/B;AACA,eAAKE,OAAL,CAAaC,WAAb,CAAyBF,CAAzB,EAA4B,CAAC,GAA7B;AACH;;AAEDd,QAAAA,cAAc,GAAG;AACb,eAAKiB,SAAL;AACH;;AApC0C,O;;;;;iBAEZ,I;;;;;;;iBAEC,I;;;;;;;iBAIR,I","sourcesContent":["import { _decorator, Node, Label, ProgressBar } from \"cc\";\nimport EventMgr from \"../../Script/Base/EventMgr\";\nimport { FBGameEventName } from \"../../Script/Games/LogicEvent\";\nimport { UIWindow } from \"../../Script/UIFrame/UIFrom\";\n\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('UIBattleLooading')\nexport class UIBattleLooading extends UIWindow {\n    @property(Node)\n    public progress: Node | null = null;\n    @property(Node)\n    public lblProTxt: Node | null = null;\n\n    //小车的动画\n    @property(Node)\n    private duduChe: Node = null;\n\n    onShow(...params: any) {\n        EventMgr.Instance.addEventListen(FBGameEventName.GAME_LOAD_COMPLETE, this.onLoadCompeted, this);\n        EventMgr.Instance.addEventListen(FBGameEventName.GAME_LOAD_PROGRESS, this.onLoadProgress, this);\n    }\n\n    onHide() {\n        EventMgr.Instance.unEventListen(FBGameEventName.GAME_LOAD_COMPLETE, this.onLoadCompeted);\n        EventMgr.Instance.unEventListen(FBGameEventName.GAME_LOAD_PROGRESS, this.onLoadProgress);\n    }\n\n    onLoadProgress(val: number) {\n        this.lblProTxt!.getComponent(Label)!.string = `${Math.round(val * 100)}/100`;\n        this.progress!.getComponent(ProgressBar)!.progress = val;\n\n        // this.calDuDuChePos();\n    }\n\n    calDuDuChePos() {\n        let progress = this.progress!.getComponent(ProgressBar)!.progress;\n        let len = 578;\n        let x = len * progress - len / 2;\n        this.duduChe.setPosition(x, -500);\n    }\n\n    onLoadCompeted() {\n        this.closeSelf();\n    }\n}\n"]}